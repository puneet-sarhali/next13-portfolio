"use client";
// TODO - add frosted background to the get in touch section
import { createClient } from "@supabase/supabase-js";
import { CiMail } from "react-icons/ci";

export default function Contact() {
  const supabase = createClient(
    process.env.NEXT_PUBLIC_SUPABASE_URL!,
    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!
  );
  async function handleFormSubmit(event: React.FormEvent<HTMLFormElement>) {
    event.preventDefault();
    const { email, message } = event.target as typeof event.target & {
      email: { value: string };
      message: { value: string };
    };
    const { data, error } = await supabase
      .from("portfolio")
      .insert([{ email: email.value, message: message.value }]);

    console.log(data, error);
    if (error) {
      alert(error.message);
    } else {
      alert("Success!");
    }
  }

  return (
    <div className="relative mb-24 mt-24 border border-neutral-900 p-12 rounded-md">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        version="1.1"
        className="absolute top-0 left-0 -z-10 overflow-hidden opacity-60 transition-all duration-1000"
        width="100%"
        height="100%"
        preserveAspectRatio="xMinYMid slice"
        viewBox="0 0 2400 1000"
      >
        <g mask='url("#SvgjsMask1048")' fill="none">
          <path
            d="M0 125C38.96 125 68.93 184.5 131.58 250C193.93 315.18 199.62 386.36 250 386.36C292.41 386.36 317.16 317.98 317.16 250C317.16 183.62 292.64 177.45 250 117.65C203.51 52.45 138.89 34.88 138.89 0C138.89 -23.95 194.44 0 250 0C324.08 0 326.88 -13.07 398.15 0C451.88 9.85 447.45 27.16 500 45.83C623.38 89.66 640.16 139.06 750 125C819.22 116.14 790.85 33.63 858.11 0C915.85 -28.87 929.06 0 1000 0C1125 0 1125 0 1250 0C1312.5 0 1317.89 -18.36 1375 0C1442.89 21.82 1447.88 80.36 1500 80.36C1532.01 80.36 1504.99 12.31 1543.27 0C1629.99 -27.87 1646.64 0 1750 0C1861.98 0 1864.98 -8.79 1973.96 0C1989.98 1.29 1984.82 13.97 2000 20.16C2122.84 70.22 2125.45 113.86 2250 112.5C2375.45 111.13 2433.39 -21.93 2500 14.71C2558.39 46.82 2500 132.36 2500 250C2500 348.76 2546.84 384.16 2500 447.53C2454.45 509.16 2322.74 439.75 2315.22 500C2303.87 590.98 2422.23 615.74 2462.26 750C2496.77 865.74 2521.44 932.69 2464.29 1000C2415.31 1057.69 2357.15 1000 2250 1000C2152.94 1000 2127.06 1038.64 2055.88 1000C2002.06 970.79 2048.16 864.29 2000 864.29C1921.26 864.29 1904.79 944.24 1802.08 1000C1779.79 1012.1 1776.04 1000 1750 1000C1625 1000 1625 1000 1500 1000C1375 1000 1375 1000 1250 1000C1125 1000 1125 1000 1000 1000C902.47 1000 848.9 1054.78 804.95 1000C748.61 929.78 820.21 868.58 799.42 750C792.73 711.87 786.39 692.65 750 686.57C636.68 667.65 620.36 677.43 500 700C451.24 709.14 419.08 707.04 411.76 750C393.51 857.04 494.12 930.04 448.86 1000C413.24 1055.04 349.43 1000 250 1000C125 1000 74.18 1050.82 0 1000C-50.82 965.17 -25.35 903.27 0 828.7C17.15 778.27 85 784.65 85 750C85 720.59 13.98 741.7 0 700.58C-28.52 616.7 0 600.29 0 500C0 375 0 375 0 250C0 187.5 -26.83 125 0 125"
            stroke="rgba(65, 65, 65, 1)"
            strokeWidth="2"
          ></path>
          <path
            d="M1750 487.5C1730.06 487.5 1708.33 494.66 1708.33 500C1708.33 505.22 1729.64 508.62 1750 508.62C1760.09 508.62 1769.23 505.06 1769.23 500C1769.23 494.5 1760.51 487.5 1750 487.5"
            stroke="rgba(65, 65, 65, 1)"
            strokeWidth="2"
          ></path>
          <path
            d="M1250 637.1C1215.66 637.1 1207.83 693.55 1207.83 750C1207.83 806.45 1215.66 862.9 1250 862.9C1297.09 862.9 1370.69 806.45 1370.69 750C1370.69 693.55 1297.09 637.1 1250 637.1"
            stroke="rgba(65, 65, 65, 1)"
            strokeWidth="2"
          ></path>
          <path
            d="M410.45 250C444.19 192.72 446.7 150 500 150C582.39 150 596.08 193.01 681.82 250C721.08 276.1 706.21 305.75 750 316.18C865.3 343.63 886.79 349.22 1000 325.76C1046.51 316.13 1031.72 284.78 1069.44 250C1156.72 169.52 1157.49 95.24 1250 95.24C1349.34 95.24 1453.13 167.33 1453.13 250C1453.13 340.3 1351.92 345.98 1250 441.18C1218.1 470.98 1200.44 460.68 1185.48 500C1141.7 615.09 1125.75 626.71 1132.53 750C1139.49 876.71 1249.55 930.97 1212.96 1000C1183.29 1055.97 1106.48 1000 1000 1000C936.82 1000 895.1 1041.97 873.63 1000C831.15 916.97 906.53 863.32 872.09 750C844.72 659.96 831.87 619.56 750 593.28C645.83 559.84 617.64 590.55 500 630.56C387.25 668.91 318.38 661.82 289.22 750C257.3 846.54 391.07 915.65 377.84 1000C371.46 1040.65 313.92 1000 250 1000C125 1000 102.27 1022.73 0 1000C-22.73 994.95 -17.07 964.76 0 944.44C87.93 839.76 121.51 858.15 210 750C246.51 705.37 231.23 694.86 250 638.89C273.16 569.86 266.14 567.19 293.86 500C346.36 372.75 341.12 367.72 410.45 250"
            stroke="rgba(65, 65, 65, 1)"
            strokeWidth="2"
          ></path>
          <path
            d="M1578.95 250C1553.76 153.57 1599.06 94.13 1663.46 0C1684.58 -30.87 1706.73 0 1750 0C1796.88 0 1803.53 -19.46 1843.75 0C1928.53 41.02 1921.24 61.33 2000 120.97C2086.32 186.33 2173.91 171.89 2173.91 250C2173.91 357.62 2106.14 472.08 2000 492.42C1894.18 512.7 1878.63 405.31 1750 331.25C1668.11 284.1 1597.03 319.2 1578.95 250"
            stroke="rgba(65, 65, 65, 1)"
            strokeWidth="2"
          ></path>
          <path
            d="M2316.04 250C2316.04 182.11 2443.04 106.62 2500 106.62C2535.02 106.62 2500 178.31 2500 250C2500 310.18 2532.54 370.37 2500 370.37C2440.56 370.37 2316.04 313.99 2316.04 250"
            stroke="rgba(65, 65, 65, 1)"
            strokeWidth="2"
          ></path>
          <path
            d="M0 275.51C58.52 275.51 203.7 401.76 203.7 500C203.7 577.96 66.49 627.91 0 627.91C-35.36 627.91 0 563.95 0 500C0 387.76 -43.33 275.51 0 275.51"
            stroke="rgba(65, 65, 65, 1)"
            strokeWidth="2"
          ></path>
          <path
            d="M1560.98 750C1655.49 683.19 1655.1 616.38 1750 616.38C1846.49 616.38 1943.75 680.22 1943.75 750C1943.75 823.01 1839.23 818.5 1750 901.96C1705.59 943.5 1727.7 979.91 1676.47 1000C1602.7 1028.93 1588.24 1000 1500 1000C1392.86 1000 1285.71 1043.28 1285.71 1000C1285.71 939.83 1389.95 893.04 1500 793.1C1527.59 768.04 1530.49 771.55 1560.98 750"
            stroke="rgba(65, 65, 65, 1)"
            strokeWidth="2"
          ></path>
          <path
            d="M2077.59 750C2105.14 663.58 2173.39 621.79 2250 621.79C2306.76 621.79 2318.63 676.97 2344.34 750C2385.19 866.07 2414.03 918.1 2383.12 1000C2366.86 1043.1 2316.56 1000 2250 1000C2189.7 1000 2157.06 1040.1 2129.41 1000C2070.86 915.1 2044.85 852.69 2077.59 750"
            stroke="rgba(65, 65, 65, 1)"
            strokeWidth="2"
          ></path>
          <path
            d="M1243.06 250C1243.06 246.84 1246.44 244.05 1250 244.05C1253.82 244.05 1257.81 246.82 1257.81 250C1257.81 253.47 1253.8 257.35 1250 257.35C1246.42 257.35 1243.06 253.49 1243.06 250"
            stroke="rgba(65, 65, 65, 1)"
            strokeWidth="2"
          ></path>
          <path
            d="M1907.89 250C1907.89 230.68 1956.38 221.77 2000 221.77C2021.45 221.77 2038.04 232.91 2038.04 250C2038.04 273.54 2024.76 303.03 2000 303.03C1959.68 303.03 1907.89 271.31 1907.89 250"
            stroke="rgba(65, 65, 65, 1)"
            strokeWidth="2"
          ></path>
          <path
            d="M2433.96 250C2433.96 225.63 2479.55 198.53 2500 198.53C2512.57 198.53 2500 224.26 2500 250C2500 271.61 2511.68 293.21 2500 293.21C2478.66 293.21 2433.96 272.97 2433.96 250"
            stroke="rgba(65, 65, 65, 1)"
            strokeWidth="2"
          ></path>
          <path
            d="M0 403.06C25.27 403.06 87.96 457.58 87.96 500C87.96 533.66 28.71 555.23 0 555.23C-15.27 555.23 0 527.62 0 500C0 451.53 -18.71 403.06 0 403.06"
            stroke="rgba(65, 65, 65, 1)"
            strokeWidth="2"
          ></path>
          <path
            d="M403.51 500C403.51 395.96 426.01 260.87 500 260.87C599.26 260.87 750 413.92 750 500C750 564.04 619.99 561.11 500 561.11C446.75 561.11 403.51 546.08 403.51 500"
            stroke="rgba(65, 65, 65, 1)"
            strokeWidth="2"
          ></path>
          <path
            d="M944.77 750C958.68 635.19 971.91 523.81 1000 523.81C1028.14 523.81 1033.92 635.81 1057.23 750C1082.53 873.91 1117.9 909.68 1097.22 1000C1089.28 1034.68 1048.61 1000 1000 1000C971.15 1000 947.49 1023.44 942.31 1000C919.87 898.44 929.83 873.28 944.77 750"
            stroke="rgba(65, 65, 65, 1)"
            strokeWidth="2"
          ></path>
          <path
            d="M1713.41 750C1713.41 736.5 1731.63 724.14 1750 724.14C1768.68 724.14 1787.5 736.49 1787.5 750C1787.5 764.13 1768.66 779.41 1750 779.41C1731.62 779.41 1713.41 764.14 1713.41 750"
            stroke="rgba(65, 65, 65, 1)"
            strokeWidth="2"
          ></path>
          <path
            d="M98.48 1000C98.48 961.31 189.51 864.86 250 864.86C293.68 864.86 306.82 951.3 306.82 1000C306.82 1018.87 278.41 1000 250 1000C174.24 1000 98.48 1028.88 98.48 1000"
            stroke="rgba(65, 65, 65, 1)"
            strokeWidth="2"
          ></path>
          <path
            d="M1397.32 1000C1397.32 971.17 1451.06 900.86 1500 900.86C1544.68 900.86 1584.56 969.94 1584.56 1000C1584.56 1019.51 1542.28 1000 1500 1000C1448.66 1000 1397.32 1020.74 1397.32 1000"
            stroke="rgba(65, 65, 65, 1)"
            strokeWidth="2"
          ></path>
          <path
            d="M2202.94 1000C2202.94 923.18 2225.32 809.52 2250 809.52C2274.83 809.52 2301.95 924.6 2301.95 1000C2301.95 1019.84 2275.98 1000 2250 1000C2226.47 1000 2202.94 1018.42 2202.94 1000"
            stroke="rgba(65, 65, 65, 1)"
            strokeWidth="2"
          ></path>
        </g>
        <defs>
          <mask id="SvgjsMask1040">
            <rect width="2400" height="1000" fill="#ffffff"></rect>
          </mask>
        </defs>
      </svg>

      <form
        onSubmit={handleFormSubmit}
        className="flex flex-col justify-center items-center"
      >
        <div className="flex flex-col justify-center items-center mb-10">
          <div className="bg-neutral-800 p-2 mb-6 rounded-full border border-neutral-700 w-fit">
            <CiMail className="text-neutral-200 "></CiMail>
          </div>

          <div>
            <h2 className="text-neutral-200 font-medium text-xl ">
              Get in touch
            </h2>
            <p className="text-neutral-500 text-xs text-center">
              hire me / feedback
            </p>
          </div>
        </div>

        <input
          className="bg-neutral-800 text-neutral-200 caret-blue-600 text-xs py-2 px-2 border-none sm:min-w-[20rem] min-w-[12rem] rounded-md placeholder:text-neutral-500"
          placeholder="example@mail.com"
          type="email"
          name="email"
        />
        <textarea
          className="bg-neutral-800 text-neutral-200 caret-blue-600 text-xs py-2 px-2 border-none sm:min-w-[20rem] min-w-[12rem] rounded-md mt-2 placeholder:text-neutral-500"
          name="message"
          placeholder="message"
        />
        <button
          className="text-blue-200 bg-blue-700 text-xxs  w-24 h-7 text-center rounded-lg mt-6"
          type="submit"
        >
          Send
        </button>
      </form>
    </div>
  );
}
